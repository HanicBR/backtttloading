<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Backstabber Brasil - Loading</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Teko:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* =========================================================
       CONFIG VISUALL
       ========================================================= */
    :root{
      --bg: #e9edf3;

      /* CARDS MAIS TRANSPARENTES */
      --glass: rgba(255,255,255,0.50);
      --glass-strong: rgba(255,255,255,0.58);
      --glass-border: rgba(0,0,0,0.05);

      --text: #0b1220;
      --muted: #475569;

      --red: #BE1B3C;
      --red-soft: rgba(190,27,60,0.10);
      --blue: #2563eb;
      --green: #16a34a;

      --radius-lg: 28px;
      --radius-md: 20px;
      --radius-sm: 14px;

      --pad-x: clamp(12px, 2vw, 28px);
      --pad-y: clamp(10px, 1.6vw, 24px);

      --fs-xs: clamp(10px, 0.9vw, 12px);
      --fs-sm: clamp(12px, 1vw, 14px);
      --fs-md: clamp(14px, 1.15vw, 16px);
      --fs-lg: clamp(16px, 1.4vw, 18px);
      --fs-xl: clamp(20px, 2vw, 26px);
      --fs-2xl: clamp(26px, 3vw, 36px);

      --shadow-soft: 0 10px 28px rgba(0,0,0,0.08);
      --shadow-deep: 0 18px 50px rgba(0,0,0,0.12);

      --ui-scale: 1;
    }

    * { box-sizing: border-box; margin:0; padding:0; }
    html, body {
      width: 100%;
      height: 100%;
      min-height: 100vh;   /* fallback forte pro CEF */
      margin: 0;
      overflow: hidden;
      background: #000;    /* caso sobre qualquer gap, não fica branco */
    }
    body {
  font-family: Inter, system-ui, sans-serif;
  background: transparent; /* deixa o bg-layer aparecer */
  color: var(--text);
}

    /* =========================================================
       BACKGROUND
       ========================================================= */
    .bg-layer {
  position: fixed;
  inset: 0;
  z-index: -3;
  overflow: hidden; /* garante que o zoom não vaze */
}

.bg-layer img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;

  transform: scale(1.35);       /* <-- AUMENTA AQUI */
  transform-origin: center;     /* mantém centralizado */
}

    /* =========================================================
       LAYOUT
       ========================================================= */
    .wrap {
      width: 100%;
      height: 100%;
      padding: var(--pad-y) var(--pad-x);
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: clamp(10px, 1.4vw, 18px);
      transform: scale(var(--ui-scale));
      transform-origin: center center;
    }
    .container {
      width: 100%;
      height: 100%;
      max-width: 1500px;
      margin: 0 auto;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: inherit;
      min-height: 0;
    }

    /* TOP GRID COM VIP CENTRAL EMBAIXO DO CLUBE VIP */
    .top-grid {
      display:grid;
      grid-template-columns: 1.25fr 1fr 1fr;
      grid-template-areas:
        "ttt vipclub rules"
        ".   vips    .";
      gap: clamp(10px, 1.4vw, 18px);
      align-items: stretch;
    }

    .card-ttt { grid-area: ttt; }
    .card-vipclub { grid-area: vipclub; }
    .card-rules { grid-area: rules; }
    .card-vips {
      grid-area: vips;
      justify-self: center;
      width: min(520px, 100%);
    }

    /* quebra em 2 colunas */
    @media (max-width: 1200px){
      .top-grid{
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
          "ttt ttt"
          "vipclub rules"
          "vips vips";
      }
      .card-vips{ width: min(640px, 100%); }
    }

    /* quebra para 1 coluna */
    @media (max-width: 820px){
      .top-grid{
        grid-template-columns: 1fr;
        grid-template-areas:
          "ttt"
          "vipclub"
          "vips"
          "rules";
      }
      .card-vips{ width: 100%; }
    }

    .glass-card{
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: clamp(12px, 1.4vw, 18px);
      box-shadow:
        var(--shadow-soft),
        inset 0 1px 0 rgba(255,255,255,0.45);
      min-height: clamp(145px, 18vh, 220px);
      overflow: hidden;
      display:flex;
      flex-direction: column;
      gap: 8px;
      position: relative;
    }

    /* brilho interno mais suave (não afeta texto) */
    .glass-card::after{
      content:"";
      position:absolute;
      inset:-30%;
      background: radial-gradient(circle at 30% 10%, rgba(255,255,255,0.30), transparent 50%);
      opacity: 0.15;
      pointer-events:none;
    }

    .card-scroll{
      overflow:auto;
      padding-right: 4px;
      scrollbar-width: thin;
    }

    /* =========================================================
       TTT CARD
       ========================================================= */
    .ttt-header {
      display:flex; align-items:center; gap:10px;
      font-weight:800; font-size: var(--fs-xl);
    }
    /* badge com fundo transparente, texto intacto */
    .ttt-badge{
      background: rgba(239,68,68,0.80);
      color:white;
      font-weight:900;
      letter-spacing:0.10em;
      padding:5px 8px;
      border-radius: 7px;
      font-size: var(--fs-sm);
      box-shadow: 0 6px 16px rgba(239,68,68,0.30);
    }
    .ttt-subtitle{
      font-size: var(--fs-sm);
      font-weight:900; letter-spacing:0.10em;
      text-transform:uppercase; color:#111827;
    }
    .ttt-text{
      font-size: var(--fs-md);
      color:var(--text);
      line-height:1.42;
    }
    .role-line{ margin-top:7px; }
    .dot{
      display:inline-block; width:9px; height:9px;
      border-radius:999px; margin-right:7px;
      transform: translateY(1px);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.12);
      opacity: 0.9; /* só visual */
    }
    .dot-red{ background:#ef4444; }
    .dot-green{ background:#22c55e; }
    .dot-blue{ background:#3b82f6; }

    /* =========================================================
       VIP CLUB CARD
       ========================================================= */
    .vip-club-card{
      justify-content:center;
      text-align:center;
      background:
        radial-gradient(circle at top, var(--red-soft), transparent 65%),
        var(--glass);
    }
    .vip-club-title{
      font-weight:900;
      font-size: var(--fs-xl);
      letter-spacing:0.12em; text-transform:uppercase;
      margin-bottom: 4px;
    }
    .vip-club-text{
      font-size: var(--fs-lg);
      color:#111827; line-height:1.38;
      padding: 0 8px;
    }

    /* =========================================================
       VIPS CARD (CENTRAL)
       ========================================================= */
    .vip-box{
      background: var(--glass-strong);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: clamp(10px, 1.2vw, 14px);
      min-height: clamp(160px, 20vh, 240px);
      max-height: 100%;
      display:flex; flex-direction:column; gap:10px;
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      position: relative;
    }
    .vip-head{
      display:flex; align-items:center; justify-content:center; gap:8px;
      flex-shrink:0;
    }
    /* badge transparente, texto intacto */
    .vip-badge{
      font-size: var(--fs-xs);
      font-weight:900;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#fff;
      background: rgba(190,27,60,0.85);
      padding: 4px 8px;
      border-radius: 999px;
      box-shadow: 0 6px 14px rgba(190,27,60,0.28);
    }
    .vip-title{
      font-size: var(--fs-sm);
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:#111827;
    }
    .vip-list{
      display:flex; flex-direction:column; gap:8px;
      overflow:auto;
      padding-right: 4px;
    }

    /* VIP ITEM ainda mais vidro */
    .vip-card{
      display:flex; align-items:center; gap:10px;
      padding:8px 10px;
      border-radius: var(--radius-sm);
      border:1px solid rgba(0,0,0,0.06);
      flex-shrink:0;
      background: rgba(255,255,255,0.68); /* <-- menos transparente */
    }
    .vip-avatar{
      width: clamp(36px, 4vw, 50px);
      height: clamp(36px, 4vw, 50px);
      border-radius:999px; object-fit:cover;
      border:2px solid rgba(190,27,60,0.9);
      flex-shrink:0;
      background: rgba(255,255,255,0.9);
    }
    .vip-name{
      font-weight:900; font-size: clamp(14px, 1.8vw, 18px); line-height:1;
    }
    .vip-id{
      font-size: var(--fs-xs); color:var(--muted);
      margin-top: 2px;
    }

    .rainbow-text{
      background: linear-gradient(90deg,#ff0000,#ff7f00,#ffff00,#00ff00,#00ffff,#0000ff,#8b00ff,#ff0000);
      background-size: 400% 100%;
      -webkit-background-clip:text; background-clip:text;
      color:transparent;
      animation: rainbowMove 4s linear infinite;
      filter: drop-shadow(0 1px 0 rgba(0,0,0,0.15));
    }
    @keyframes rainbowMove {
      0%{ background-position:0% 50%; }
      100%{ background-position:400% 50%; }
    }

    /* =========================================================
       RULES CARD
       ========================================================= */
    .rules-title{
      font-weight:900; font-size: var(--fs-lg);
      text-align:center;
    }
    .rules-list{
      display:flex; flex-direction:column;
      gap: clamp(6px, 1vh, 10px);
      font-size: var(--fs-lg); color:#111827;
    }
    .rule-item{ display:flex; gap:12px; align-items:flex-start; }
    /* quadrinho do número transparente */
    .rule-num{
      min-width: clamp(34px, 3.5vw, 44px);
      min-height: clamp(34px, 3.5vw, 44px);
      border-radius:10px;
      display:flex; align-items:center; justify-content:center;
      font-weight:900; font-size: clamp(16px, 2vw, 22px);
      color:#1d4ed8;
      background: rgba(29,78,216,0.07);
      border: 1px solid rgba(29,78,216,0.10);
      flex-shrink: 0;
    }

    /* =========================================================
       BOTTOM LOADING BAR
       ========================================================= */
    .loading-bar{
      background: var(--glass-strong);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius-lg);
      padding: clamp(10px, 1.2vw, 14px) clamp(12px, 1.4vw, 16px);
      width: 100%;
      box-shadow: var(--shadow-deep);
      display:flex; flex-direction:column; gap:8px;
    }

    .loading-top{
      display:flex; align-items:flex-end; justify-content:space-between; gap:12px;
      flex-wrap: wrap;
    }
    .server-name{
      font-family: Teko, Inter, sans-serif;
      font-size: var(--fs-2xl);
      letter-spacing:0.18em; text-transform:uppercase;
      color:#111827;
    }
    .server-sub{
      font-size: var(--fs-xs);
      color:var(--muted);
      letter-spacing:0.12em; text-transform:uppercase;
    }

    /* barra de progresso mais transparente */
    .progress-bg{
      width:100%; height: clamp(10px, 1.2vw, 14px);
      border-radius:999px;
      background: rgba(15,23,42,0.07);
      overflow:hidden;
      border:1px solid rgba(0,0,0,0.06);
    }
    .progress-fill{
      height:100%; width:0%;
      border-radius:999px;
      background: linear-gradient(90deg, rgba(190,27,60,0.92), rgba(251,113,133,0.92));
      transition: width .2s ease;
      box-shadow: 0 0 10px rgba(190,27,60,0.45);
    }

    .loading-bottom{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      flex-wrap: wrap;
      font-size: var(--fs-sm);
      color:#111827;
    }
    .percent{
      font-weight:900;
      font-size: clamp(16px, 2vw, 20px);
      color:#111827;
      margin-left:auto;
    }
    .status{
      font-size: var(--fs-md);
      color:#0f172a;
      max-width: 75ch;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .file{
      font-size: var(--fs-xs); color:var(--muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 60vw;
    }
    .mini-info{
      text-align:right; font-size:var(--fs-xs); color:var(--muted);
      display:flex; flex-direction:column; gap:2px;
    }

    @media (prefers-reduced-motion: reduce){
      * { animation: none !important; transition: none !important; }
    }
    .text-outline {
  -webkit-text-stroke: 0.7px rgba(255,255,255,0.9);

  /* fallback que simula outline */
  text-shadow:
    -0.7px -0.7px 0 rgba(255,255,255,0.9),
     0.7px -0.7px 0 rgba(255,255,255,0.9),
    -0.7px  0.7px 0 rgba(255,255,255,0.9),
     0.7px  0.7px 0 rgba(255,255,255,0.9);
}
  </style>
</head>
<body>
  <audio id="bg-music" preload="auto" loop>
    <source src="assets/music/crazytrain.ogg" type="audio/ogg">
  </audio>
  <!-- background fixo -->
  <div class="bg-layer" id="bg-layer"></div>

  <div class="wrap" id="wrap">
    <div class="container">

      <!-- TOP GRID -->
      <div class="top-grid">

        <!-- TTT -->
        <div class="glass-card card-ttt">
          <div class="ttt-header">
            <span class="ttt-badge">TTT</span>
            <span>Trouble in Terrorist Town</span>
          </div>
          <div class="ttt-subtitle">Quem é o assassino?</div>

          <div class="card-scroll ttt-text">
            Em Trouble in Terrorist Town, a paranóia é sua melhor amiga.
            <div class="role-line"><span class="dot dot-red"></span><b>TRAIDORES</b> (Minoria): Matem todos sem serem descobertos.</div>
            <div class="role-line"><span class="dot dot-green"></span><b>INOCENTES</b> (Maioria): Descubram quem são os traidores antes que seja tarde.</div>
            <div class="role-line"><span class="dot dot-blue"></span><b>DETETIVE</b> (Líder): Use ferramentas forenses para caçar os culpados.</div>
            <div class="role-line"><b>Dica:</b> Viu algo suspeito? Avise no chat de voz!</div>
          </div>
        </div>

        <!-- Clube VIP -->
        <div class="glass-card vip-club-card card-vipclub">
          <div class="vip-club-title">Clube VIP</div>
          <div class="card-scroll vip-club-text">
            VIPs têm o privilégio exclusivo de ter o nome estampado na nossa tela de Loading.
          </div>
        </div>

        <!-- Rules -->
        <div class="glass-card card-rules">
          <div class="rules-title">O que você deve saber</div>
          <div class="card-scroll rules-list">
            <div class="rule-item"><div class="rule-num">1</div><div>Não mate sem motivo</div></div>
            <div class="rule-item"><div class="rule-num">2</div><div>Não ofenda nenhum jogador</div></div>
            <div class="rule-item"><div class="rule-num">3</div><div>Não abuse de props</div></div>
            <div class="rule-item"><div class="rule-num">4</div><div>Entre no nosso Discord para estar atualizado, digite <b>!discord</b></div></div>
            <div class="rule-item"><div class="rule-num">5</div><div>Entre no nosso grupo Steam, digite <b>!steam</b></div></div>
          </div>
        </div>

        <!-- VIPs CENTRAL -->
        <div class="vip-box card-vips">
          <div class="vip-head">
            <span class="vip-badge">VIP</span>
            <span class="vip-title">Jogadores do servidor</span>
          </div>
          <div class="vip-list" id="vip-list"></div>
        </div>

      </div>

      <!-- espaço do meio -->
      <div style="min-height:0;"></div>

      <!-- BOTTOM loading -->
      <div class="loading-bar">
        <div class="loading-top">
          <div>
            <div class="server-name" id="server-name">BACKSTABBER BRASIL</div>
            <div class="server-sub" id="server-sub">Conectando ao servidor...</div>
          </div>
          <div class="percent" id="progress-percent">0%</div>
        </div>

        <div class="progress-bg">
          <div class="progress-fill" id="progress-bar"></div>
        </div>

        <div class="loading-bottom">
          <div>
            <div class="status" id="status-text">Aguardando resposta do jogo...</div>
            <div class="file" id="file-text"></div>
          </div>
          <div class="mini-info">
            <div id="info-map">mapa: –</div>
            <div id="info-gamemode">modo: –</div>
            <div id="info-players">players: –</div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
  /* =========================================================
     CONFIG
     ========================================================= */
  var LOADING_CONFIG = {
    fallbackServerName: "Backstabber Brasil",
    subtitleWhenIdle: "Conectando ao servidor...",
    backgroundImages: [
      "https://i.imgur.com/HnZfcKR.jpeg"
    ],
    backgroundChangeSeconds: 12
  };

  var VIPS = [
    {
      steamId: "",
      name: "✪ Sushi",
      avatar: "https://i.imgur.com/qrtE4cN.gif"
    }
  ];

  /* =========================================================
     BACKGROUND FIXO
     ========================================================= */
  (function initBackground(){
    var layer = document.getElementById("bg-layer");
    if(!LOADING_CONFIG.backgroundImages || LOADING_CONFIG.backgroundImages.length === 0) return;

    var img = document.createElement("img");
    img.src = LOADING_CONFIG.backgroundImages[0];
    layer.appendChild(img);
  })();

  /* =========================================================
     VIP RENDER
     ========================================================= */
  function renderVips(){
    var list = document.getElementById("vip-list");
    if(!list) return;
    list.innerHTML = "";

    for(var i=0; i<VIPS.length; i++){
      var v = VIPS[i];
      var card = document.createElement("div");
      card.className = "vip-card";
      card.innerHTML =
        '<img class="vip-avatar" src="'+v.avatar+'" alt="'+v.name+'">' +
        '<div>' +
          '<div class="vip-name rainbow-text">'+v.name+'</div>' +
          '<div class="vip-id">'+(v.steamId||"")+'</div>' +
        '</div>';
      list.appendChild(card);
    }
  }
  renderVips();

  /* =========================================================
     MÚSICA DE FUNDO
     ========================================================= */
  (function initMusic(){
    var audio = document.getElementById("bg-music");
    if(!audio) return;

    audio.volume = 0.25;

    function tryPlay(){
      try {
        var p = audio.play();
        if(p && typeof p.catch === "function"){
          p.catch(function(){});
        }
      } catch(e){}
    }

    var ua = navigator.userAgent || "";
    if(ua.indexOf("GMod") !== -1){
      tryPlay();
    } else {
      window.addEventListener("click", tryPlay, { once:true });
      window.addEventListener("keydown", tryPlay, { once:true });
    }
  })();

  /* =========================================================
     PROGRESSO / STATUS
     ========================================================= */
  var currentProgress = 0;
  var mountingAddons = false;

  function setProgress(target){
    if(target < 0) target = 0;
    if(target > 100) target = 100;
    if(target < currentProgress) target = currentProgress;
    currentProgress = target;

    document.getElementById("progress-bar").style.width = target + "%";
    document.getElementById("progress-percent").textContent = Math.round(target) + "%";

    if(target >= 99){
      document.getElementById("server-sub").textContent = "Pronto para entrar!";
    }
  }

  /* =========================================================
     HOOKS DO GMOD
     ========================================================= */
  function GameDetails(servername, serverurl, mapname, maxplayers, steamid, gamemode){
    document.getElementById("server-name").textContent =
      servername || LOADING_CONFIG.fallbackServerName;

    document.getElementById("server-sub").textContent =
      LOADING_CONFIG.subtitleWhenIdle;

    document.getElementById("info-map").textContent =
      "mapa: " + (mapname || "–");

    document.getElementById("info-gamemode").textContent =
      "modo: " + (gamemode || "–");

    document.getElementById("info-players").textContent =
      "players: 0/" + (maxplayers || "–");
  }

  function SetStatusChanged(status){
    document.getElementById("status-text").textContent = status || "";

    if(status && status.indexOf("/") !== -1){
      var match = status.match(/(\d+)\s*\/\s*(\d+)/);
      if(match){
        var cur = parseInt(match[1],10) || 0;
        var tot = parseInt(match[2],10) || 1;
        var base = mountingAddons ? 40 : 10;
        var pct = base + (cur/tot)*60;
        setProgress(pct);
      }
    }

    if(status === "Mounting Addons" || status === "Workshop Complete"){
      mountingAddons = true;
      setProgress(80);
    }
    if(status === "Client info sent!" || status === "Client info sent"){
      setProgress(92);
    }
    if(status === "Starting Lua..."){
      setProgress(100);
    }
  }

  function DownloadingFile(fileName){
    document.getElementById("file-text").textContent =
      fileName ? "Baixando: " + fileName : "";
  }

  window.GameDetails = GameDetails;
  window.SetStatusChanged = SetStatusChanged;
  window.DownloadingFile = DownloadingFile;

  /* =========================================================
     AUTO SCALE (1920x1080 baseline)
     ========================================================= */
  (function autoScale(){
    function apply(){
      var w = window.innerWidth;
      var h = window.innerHeight;
      var scaleW = w / 1920;
      var scaleH = h / 1080;
      var s = Math.min(scaleW, scaleH);
      s = Math.max(1.0, Math.min(1.18, s));
      document.documentElement.style.setProperty("--ui-scale", s.toFixed(3));
    }
    apply();
    window.addEventListener("resize", apply);
  })();

  /* =========================================================
     PREVIEW FORA DO GMOD
     ========================================================= */
  (function preview(){
    var ua = navigator.userAgent || "";
    if(ua.indexOf("GMod") !== -1) return;

    GameDetails(
      LOADING_CONFIG.fallbackServerName,
      "", "ttt_minecraft_b5", 24, "", "Trouble in Terrorist Town"
    );

    var steps = [
      "Conectando ao servidor...",
      "Autenticando...",
      "3/20","7/20","14/20","20/20",
      "Workshop Complete",
      "Client info sent!",
      "Starting Lua..."
    ];

    var i=0;
    function tick(){
      if(i>=steps.length) return;
      SetStatusChanged(steps[i++]);
      setTimeout(tick, 900);
    }
    setTimeout(tick, 800);
  })();
</script>

</body>
</html>
